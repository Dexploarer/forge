{
  "name": "prevent-force-push",
  "event": "user-prompt-submit",
  "description": "Prevents dangerous force pushes to protected branches",
  "enabled": true,
  "prompt": "Before executing any git command, analyze if it's a force push operation:\n\n**Detection Patterns:**\n- `git push --force`\n- `git push -f`\n- `git push --force-with-lease`\n- Any push with force flags\n\n**If Force Push Detected:**\n\n1. Check target branch:\n   - main/master/develop/production ‚Üí ‚õî BLOCK\n   - feature/* or personal branches ‚Üí ‚ö†Ô∏è  WARN but allow\n\n2. If blocking, show:\n```\nüö´ FORCE PUSH BLOCKED\n\nYou're attempting to force push to a protected branch.\n\nBranch: [branch-name]\nRisk Level: HIGH\n\nWhy this is dangerous:\n‚Ä¢ Overwrites remote history\n‚Ä¢ Can lose other developers' work\n‚Ä¢ Breaks team's git history\n‚Ä¢ Difficult to recover from\n\nSafer alternatives:\n1. Merge instead of rebase:\n   git merge origin/[branch]\n\n2. Create new branch:\n   git checkout -b [branch]-v2\n   git push origin [branch]-v2\n\n3. Coordinate with team:\n   - Notify team before force push\n   - Ensure no one has pending work\n   - Use --force-with-lease (safer)\n\nTo bypass this protection:\n‚Ä¢ Temporarily disable this hook in settings\n‚Ä¢ Contact repo admin for permission\n```\n\n3. If warning, show:\n```\n‚ö†Ô∏è  Force Push Warning\n\nYou're force pushing to: [branch-name]\n\nThis is allowed but verify:\n‚úì No one else is using this branch\n‚úì You have a backup of important commits\n‚úì You understand the implications\n\nProceed? (yes/no)\n```\n\n**Never Block:**\n- Regular pushes (without force flags)\n- Pull operations\n- Branch viewing/switching\n- Fetch operations"
}
